<app-header></app-header>

<p-toast />
<app-loader *ngIf="!dataReady"></app-loader>

<p-table *ngIf="dataReady" [value]="users"
		[tableStyle]="{ 'min-width': '50rem' }"
		styleClass="p-datatable-striped"
		[lazy]="true">
    <ng-template pTemplate="header">
        <tr>
            <th>User</th>
            <th>Name</th>
            <th>Address</th>
            <th>Phone</th>
            <th>Email</th>
            <th>City</th>
            <th *ngIf="loggedAsAdmin" style="width: 5rem"></th>
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-user let-i="rowIndex">
        <tr>
            <td>{{ user.username }}</td>
            <td>{{ user.name }}</td>
            <td>{{ user.address.street }}</td>
            <td>{{ user.phone }}</td>
            <td>{{ user.email }}</td>
            <td>{{ user.address.city }}</td>
            <td *ngIf="loggedAsAdmin" style="display: flex;">
                <button  
                    pButton 
                    pRipple 
                    type="button"
                    icon="pi pi-pencil" 
                    (click)="edit(user)" 
                    class="p-button-rounded p-button-text">
                </button>
				<button  
                    pButton 
                    pRipple 
                    type="button"
                    icon="pi pi-trash" 
                    (click)="delete(user, i)" 
                    class="p-button-rounded p-button-text">
                </button>
            </td>
        </tr>
    </ng-template>
</p-table>